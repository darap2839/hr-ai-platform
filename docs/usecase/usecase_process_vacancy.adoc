= Use Case: Обработка вакансии
:toc:
:sectnums:

== Акторы

* HR-менеджер (пользователь)
* hr_job_service
* hr_api_service
* hr_matching_service
* hr_psql_service

== Цель

Создать или обновить вакансию и передать её другим сервисам для дальнейшей обработки.

== Предусловия

* Пользователь авторизован.
* Вакансия имеет корректные данные.

== Основной сценарий

1. Пользователь отправляет запрос на создание/обновление вакансии через Frontend.
2. Запрос попадает в hr_api_service.
3. hr_api_service перенаправляет запрос в hr_job_service.
4. hr_job_service валидирует вакансию.
5. hr_job_service сохраняет вакансию в PostgreSQL через hr_psql_service.
6. hr_job_service уведомляет hr_matching_service о необходимости пересчёта совпадений.
7. hr_matching_service формирует задачу на обновление метрик и ранжирования.

== Альтернативные сценарии

=== Ошибочная валидация

* hr_job_service возвращает ошибку → пользователю отображается сообщение.

=== Недоступна база данных

* hr_job_service сообщает hr_api_service о проблеме.
* hr_api_service возвращает ошибку 503.

== Постусловия

* Вакансия сохранена.
* Сервис matching получил событие для пересчёта.